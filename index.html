<html>
  <head>
    <title>
      Sociogram
    </title>
    <script type="text/javascript" src="cviz.js"></script>
  </head>
  <body>
    <h1>Sociogram Graph Generator</h1>
    <p>
      This webpage allows you to create a graphical representation of
      a sociogram.  You can provide the data by inputting it item by
      item in the
      form, uploading a file, or entering it all in one in a text box.
      Once the graph is generated, you can download it as an SVG and
      you can download the data in a suitable format for later
      uploading.
    </p>
    <p>
      Note that no data is sent over the network.  The processing of the
      data takes place in the browser on your machine.  You can verify
      this by using this page with your computer detached from your network.  
    </p>
    <p>
      The graph generation code is done
      by <a href="https://github.com/mdaines/viz.js/">this javascript
      port</a> of <a href="http://www.graphviz.org/">Graphviz</a>.
    </p>
    <p>
      <form id="form">
	<label for="title" style="padding-right: 1ex; font-weight:
	bold;">Title of Sociogram:</label><input type="text" id="title"
				    name="title">
	<div>
	<fieldset style="display: inline-block; margin: 15px;">
	<legend>Input method</legend>

	<label><input type="radio" name="input" value="form">Form</label><br>
	<label><input type="radio" name="input" value="text">Text</label><br>
	<label><input type="radio" name="input" value="file">File</label>
	</fieldset>
	</div>
	<table id="formInput">
	  <thead>
	  <tr>
	    <th>
	      Name
	    </th>
	    <th>
	      Positives
	    </th>
	    <th>
	      Negatives
	    </th>
	  </tr>
	  </thead>
	  <tfoot>
	    <tr>
	      <td>
		<button name="add" id="add">+</button>
	      </td>
	    </tr>
	  </tfoot>
	  <tbody id="list">
	  <tr>
	    <td>
	      <input type="text" id="name0" name="name0">
	    </td>
	    <td>
	      <input type="text" id="positive0" name="positive0">
	    </td>
	    <td>
	      <input type="text" id="negative0" name="negative0">
	    </td>
	  </tr>
	  </tbody>
	</table>
	<div id = "textInput">
	  Enter the data so that each line has the following format:<br>
	  <code>
	    Name;First Positive,Second Positive;First Negative,Second
	    Negative,Third Negative
	  </code><br>
	  Spaces either side of the <code>;</code> and <code>,</code>
	  are ignored.<br>
	<textarea id="text" style="width: 100ex; height:
				   5em;"></textarea>
	</div>
	<div id="fileInput">
	  Select a file to upload.
	  Each line of the file should be in the following format:<br>
	  <code>
	    Name;First Positive,Second Positive;First Negative,Second
	    Negative,Third Negative
	  </code><br>
	  Spaces either side of the <code>;</code> and <code>,</code>
	  are ignored.<br>
	  <input type="file" id="fileUpload">
	</div>
	<div>
	  Select what to show on the graph:<br> 
	  <input type="checkbox" name="positive" id="positive">Positive<br>
	  <input type="checkbox" name="negative" id="negative">Negative<br>
	  <button name="generate" id="generate">Generate the Graph</button><br>
	  <a href="" id="gdownload" style="display: none">Download the Graph</a><br>
	  <a href="" id="tdownload" style="display: none">Download the Data</a><br>
	</div>
      </form>
    </p>
    <p id="output">
    </p>
  </body>
  <script type="text/javascript" src="sociogram.js"></script>
</html>
